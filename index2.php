<!doctype html>


<html>
<head>
    <title>My Baby Data Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="jquery.mobile-1.4.2/jquery.mobile-1.4.2.min.css">
     
    <script src="lib/jquery-1.8.2.min.js"></script>
    <script src="jquery.mobile-1.4.2/jquery.mobile-1.4.2.min.js"></script>
    
   
   

</head>
<body>

     


                            <!-- MENU PAGE -->

    <div data-role="page" id="pageone">
 
        <div data-role="header" data-theme="b" >
            <h2>Baby Data Tracker</h2>
            <div data-role="navbar" >
    <ul>
        
        <li><a href="#profile">Profile</a></li>
    </ul>
    </div>
          
</div>
 
        <div data-role="content">
            <p>Select Activity</p>

            <form>
    
            <ul data-role="listview" data-inset="true" data-theme="e">
    <li><a href="#pagetwo" data-transition="slide">Baby Feed</a></li>
    <li><a href="#pagethree" data-transition="slide">Nappy Change</a></li>
    <li><a href="#pagefour" data-transition="slide">Sleep</a></li>
    <li><a href="#pagefive" data-transition="slide">Medication</a></li>
    <li><a href="#pagesix" data-transition="slide">Milestones</a></li>
    
</ul>
</form>
<div id="feedlistholder">
  Recent Feeds:
  <br>
  <br>
  Start Time &nbsp&nbsp&nbsp&nbsp End Time &nbsp&nbsp&nbsp&nbsp Date &nbsp&nbsp&nbsp&nbsp Type &nbsp&nbsp&nbsp&nbsp Amount
  <br>
<ul id="feedlist" width="80%" data-role="listview" data-inset="true" data-split-icon="minus" >
        </ul>
</div>



<br>
<br>

    

 <div data-role="footer" data-id="foo1" data-position="fixed">
    <div data-role="navbar">
        <ul>
            <li><a href="#summary" onclick"outputFeedAmount()">Summary</a></li>
            
            
            
        </ul>
     </div>
    </div>

        </div>
 
        
</div>


                                





                                <!-- BABY FEED PAGE -->
<div data-role="page" id="pagetwo">
 
        <div data-role="header" data-theme="b" >
            <h2>Baby Feed Tracker</h2>
            <div data-role="navbar" >
    <ul>
        <li><a href="#pageone" data-transition="slide" data-direction="reverse">Back</a></li>
        
    </ul>
</div>
            
        </div>
 
        <div data-role="content" style="margin:0 auto; margin-left:auto; margin-right:auto; align:center; text-align:center;">
        
      
        <br>
            


            <a href="#timer" data-role="button" data-rel="dialog" id="startfeed">Start Feed</a>
            <a href="#endtimer" data-role="button" data-rel="dialog">Stop Feed</a>

<br>

  <br>   
<br>
    <a href="#" data-role="button" data-icon="star">Synchronise</a>


        </div>
 
        
    </div><!-- /page -->


                            <!-- ********NAPPY CHANGE PAGE***********--> 


<div data-role="page" id="pagethree">
 
        <div data-role="header" data-theme="b" >
            <h2>Baby Data Tracker</h2>
            <div data-role="navbar" >
    <ul>
        <li><a href="#pageone" data-transition="slide" data-direction="reverse">Back</a></li>
        
    </ul>
</div><!-- /navbar -->
            
        </div><!-- /header -->
 
        <div data-role="content">
            
            <div data-role="popup" id="popupBasic">
                
        
</div>

            <a href="#nappys" data-role="button" data-rel="dialog">Add Nappy Change</a>



<div id="nappylistholder">
  Recent Nappy Changes:
  <br>
  <br>
  Time &nbsp&nbsp&nbsp&nbsp Date
  <br>
<ul id="nappylist" data-role="listview" data-inset="true" >
        </ul>
</div>


<br>
    
<br>
    <a href="#" data-role="button" data-icon="star">Synchronise</a>


        </div>
 
        
    </div>


                        <!-- ********SLEEP PAGE*********** -->

<div data-role="page" id="pagefour">
 
        <div data-role="header" data-theme="b" >
            <h2>Baby Data Tracker</h2>
            <div data-role="navbar" >
    <ul>
        <li><a href="#pageone" data-transition="slide" data-direction="reverse">Back</a></li>
        
    </ul>
</div>
            
        </div>
 
        <div data-role="content">
            

            <a href="#sleeps" data-role="button" data-rel="dialog">Sleep Start time</a>
            <a href="#endsleep" data-role="button" data-rel="dialog">Sleep End time</a>


<div id="sleeplistholder">
  Recent Sleeps:
  <br>
  <br>
  Asleep &nbsp&nbsp Awake
  <br>
<ul id="sleeplist" data-role="listview" data-inset="true" >
        </ul>
</div>


<br>
    
<br>
    <a href="#" data-role="button" data-icon="star">Synchronise</a>


        </div>
        
    </div>

                        <!-- ********MEDICATION PAGE*******-->

<div data-role="page" id="pagefive">
 
        <div data-role="header" data-theme="b" >
            <h2>Baby Data Tracker</h2>
            <div data-role="navbar" >
    <ul>
        <li><a href="#pageone" data-transition="slide" data-direction="reverse">Back</a></li>
        
    </ul>
</div>
            
        </div>
 
        <div data-role="content" style="margin:0 auto; margin-left:auto; margin-right:auto; align:center; text-align:center;">
            
            <label>Select Medication Type:</label><br>
            <select id="medtype">
                <option value="calpol">Calpol</option>
                <option value="dentinox">Dentinox</option>
                <option value="bepanthen">Bepanthen</option>
            </select>
            <label>Time:</label><br>
            <input type="time"   id="medtime" /> 
            <label>Date:</label><br> 
            <input type="date"  id="meddate" /> 
            <a href="#" data-role="button" data-icon="add" data-inline="true" id="addMed" onclick="addMed();">Add Medication</a>

<div id="medlistholder">
  Recent Medication:
  <br>
  <br>
  Time &nbsp&nbsp&nbsp&nbsp Date
  <br>
<ul id="medlist" data-role="listview" data-inset="true" >
        </ul>
</div>


<br>
    
<br>
    <a href="#" data-role="button" data-icon="star">Synchronise</a>


        </div>
 
        
    </div>

                        <!-- ********MILESTONES PAGE****** -->

<div data-role="page" id="pagesix">
 
        <div data-role="header" data-theme="b" >
            <h2>Baby Data Tracker</h2>
            <div data-role="navbar" >
    <ul>
        <li><a href="#pageone" data-transition="slide" data-direction="reverse">Back</a></li>
        
    </ul>
</div>
            
        </div>
 
        <div data-role="content">
            
            <div data-role="popup" id="popupBasic">
                
        
</div>
    <div data-role="fieldcontain" id="milestoneinput">
            <label>Describe Milestone</label><br>
            <input type="text" id="mstype"><br><br>
            <label>Date:</label><br>
            <input type="date" id="msdate">
            <br><br>
           <button type="button" id="addMilestone" onclick="addMilestone();">Add Milestone</button>
       </div>
<div id="milestonelistholder">
  Recent Milestones:
  <br>
  <br>
  Time &nbsp&nbsp&nbsp&nbsp Date
  <br>
<ul id="milestonelist" data-role="listview" data-inset="true" >
        </ul>
</div>


<br>
    
<br>
    <a href="#" data-role="button" data-icon="star">Synchronise</a>


        </div>
 
        
    </div>



                        <!-- ***********SUMMARY PAGE*********** -->

<div data-role="page" id="summary">
 
        <div data-role="header" data-theme="b" >
            <h2>Summary</h2>
            <div data-role="navbar" >
    <ul>
        <li><a href="#pageone" data-transition="slide" data-direction="reverse">Back</a></li>
        
    </ul>
            </div>
            
        </div>
 
      <div id="summarylistholder">
        <button id="showfeedamout" onclick="outputRecentFeeds()" value="Calculate 24 hour feed total"></button>
  
  <ul id="feedamountlist" data-role="listview" data-inset="true" >
  </ul>


        <button id="showsleepamout" onclick="outputRecentSleep()" value="Calculate last sleep total"></button>
  
  <ul id="sleepamountlist" data-role="listview" data-inset="true" >
  </ul>


        <button id="showNappyAmount" onclick="outputNappyAmount()" value="Calculate total nappy changes"></button>
  
  <ul id="nappyamountlist" data-role="listview" data-inset="true" >
  </ul>
  
</div>
 
        
            
            
        
</div>

           



                        


                        <!-- ********TIMER POPUP********** -->

<div data-role="page" id="timer" data-theme="d" data-overlay-theme="d" >

<div data-role="fieldcontain" data-theme="d" data-overlay-theme="d">
    <a href="#pagetwo" data-role="button" data-icon="delete" data-mini="true" data-inline="true" data-theme="a">Close</a>
    <br>
    <br>
    <select name="slider" id="feedtype" data-role="slider">
        <option value="Bottle">Bottle</option>
        <option value="Breast">Breast</option>
        </select>
        <br>
    <label for="name">&nbsp&nbspStart Time:</label>
    <input type="time" id="feedtime"  />
    <br>
    <label for="name">&nbsp&nbspDate:</label>
    <input type="date"  id="feeddate"   /> 
    <br>
    <br>
    <a href="#pagetwo" data-icon="check"><button type="button" id="addFeed" onclick="addFeed();">Add Feed</button></a>
</div>

</div>

                                                <!-- ********FEED END TIMER POPUP********** -->

<div data-role="page" id="endtimer" data-theme="d" data-overlay-theme="d" >

<div data-role="fieldcontain" data-theme="d" data-overlay-theme="d">
    <a href="#pagetwo" data-role="button" data-icon="delete" data-mini="true" data-inline="true" data-theme="a">Close</a>
    <br>
    <br>
        <br>
    <label for="name">&nbsp&nbspEnd Time:&nbsp</label><br>
    <input type="time" id="endfeedtime"   /><br><br>
    <label>Amount: </label><br>
    <select id="amount">
        <option value="1">1oz</option>
        <option value="2">2oz</option>
        <option value="3">3oz</option>
        <option value="4">4oz</option>
        <option value="5">5oz</option>
        <option value="6">6oz</option>
        <option value="7">7oz</option>
        <option value="8">8oz</option>
        <option value="9">9oz</option>
        <option value="10">10oz</option>
    </select>  
    <br>

    
    <br>
    <a href="#pagetwo" data-icon="check"><button type="button" id="addFeed" onclick="addEndFeed();">Add Feed</button></a>
</div>

</div>


                        <!-- **********NAPPY CHANGE POPUP*********** -->

<div data-role="page" id="nappys" data-theme="d" data-overlay-theme="d">

<div data-role="fieldcontain" data-theme="d">
    <a href="#pagethree" data-role="button" data-icon="delete" data-mini="true" data-inline="true" data-theme="e">Close</a>
    <br>
    <br>
    <label for="name">&nbsp&nbspNappy Type?:</label><br/>
    <select name="nappytype" id="ntype">
        <option value="Wet">Wet Only</option>
        <option value="Dirty">Dirty Only</option>
        <option value="WetDirty">Wet & Dirty</option>

    </select>
    <br><br>
    <label for="name">&nbsp&nbspNappy Changed:</label>
    <input type="time" id="ntime"   />
    <br><br>
    <label for="name">&nbsp&nbspDate:</label>
    <input type="date" id="ndate"   />
    <br>
    <label>Observations</label>
    <input type=text id="observations">
    <br>
    <a href="#pagethree" data-icon="check"><button type="button" id="addNappy" onclick="addNappy();">Add Nappy Change</button></a>
</div>

</div>

                        <!-- *********SLEEP POPUP*********** -->

<div data-role="page" id="sleeps" data-theme="d" data-overlay-theme="d" >

<div data-role="fieldcontain" data-theme="e" >
    <a href="#pagefour" data-role="button" data-icon="delete" data-mini="true" data-inline="true" data-theme="a">Close</a>
    <br>
    <br>
    <label for="name">&nbsp&nbspStart Time:</label>
    <input type="time" id="stime"   />
    <br>
    <label for="name">&nbsp&nbspDate:</label>
    <input type="date" id="sdate"   />
    <br>
    <br>
    <a href="#pagefour" data-icon="check"><button type="button" id="addSleep" onclick="addSleep();">Add Sleep</button></a>
</div>

</div>

<!-- *********END SLEEP POPUP*********** -->

<div data-role="page" id="endsleep" data-theme="d" data-overlay-theme="d" >

<div data-role="fieldcontain" data-theme="e" >
    <a href="#pagefour" data-role="button" data-icon="delete" data-mini="true" data-inline="true" data-theme="a">Close</a>
    <br>
    <br>
    <label for="name">&nbsp&nbspStart Time:</label>
    <input type="time" name="name" id="endstime" value=""  />
    <input type="date" name="name" id="endsdate" value=""  />
    <br>
    
    
    <br>
    <a href="#pagefour" type="button" data-icon="check" onclick="addEndSleep();">Submit</a>
</div>

</div>

                       

                <!-- *********PROFILE PAGE POPUP******** -->

<div data-role=page id="profile">
  <div data-role=header>
    
  </div>

  <div data-role=content>
    

    
    
    <span> Last name </span>
    <input type=text id="lname">
    <span> First name </span>
    <input type=text id="fname">
    <span> Child</span>
    <input type=text id="child">
    <span> Email</span>
    <input type=text id="email">
    <span> Username</span>
    <input type=text id="uname">
    <span> Password</span>
    <input type=password id="pword">
<br>
    <a href="#pageone"><button id="addProfile" onclick="addProfile()">Create Profile</button></a>

  </div>
</div>




</body>
</html>

                            <!-- **********DATABASE********** --> 


<script>


                             
        if (window.openDatabase) {
                                        //Creating the database 

            var mydb = openDatabase("babydata", "0.1", "A Database of baby info", 1024 * 1024);


            mydb.transaction(function(t) {
                t.executeSql("CREATE TABLE IF NOT EXISTS feeds (id INTEGER PRIMARY KEY ASC, feedtime TIME, feeddate TIME, feedtype TEXT, endfeedtime TIME,  amount INTEGER, uname TEXT)");

            });

            

            mydb.transaction(function(t) {
                t.executeSql("CREATE TABLE IF NOT EXISTS profile (id INTEGER PRIMARY KEY ASC, email text, fname TEXT, lname TEXT, pword TEXT, child TEXT, uname TEXT)");
            });

            mydb.transaction(function(t) {
                t.executeSql("ALTER TABLE feeds ADD uname TEXT");

            });



            mydb.transaction(function(t) {
                t.executeSql("CREATE TABLE IF NOT EXISTS nappy (id INTEGER PRIMARY KEY ASC, ntype TEXT, ntime TIME, ndate DATE, observations TEXT, uname TEXT)");
            });

        
            mydb.transaction(function(t) {
                t.executeSql("CREATE TABLE IF NOT EXISTS sleep (id INTEGER PRIMARY KEY ASC, stime TIME, endstime TIME, sdate DATE, endsdate DATE, uname TEXT)");
            });

            mydb.transaction(function(t) {
                t.executeSql("CREATE TABLE IF NOT EXISTS medication (id INTEGER PRIMARY KEY ASC, medtype TEXT, medtime TIME, meddate DATE, mednotes TEXT, uname TEXT)");
            });

            mydb.transaction(function(t) {
                t.executeSql("CREATE TABLE IF NOT EXISTS milestones (id INTEGER PRIMARY KEY ASC, mstype TEXT, msdate DATE, uname TEXT)");
            });



 
 
 
        } else {
            alert("WebSQL is not supported by your browser!");
        }







 
                                                                            //Add Feeds to Database        
 
        function updateFeedList(transaction, results) {
            
            var listitems = "";
            
            var listholder = document.getElementById("feedlist");
 
            listholder.innerHTML = "";
 
            var i;
            for (i = 0; i < results.rows.length; i++) {
                var row = results.rows.item(i);
 
                listholder.innerHTML += "<li>" + row.feedtime + "  &nbsp-&nbsp  " + row.endfeedtime + " &nbsp-&nbsp " + row.feeddate + " &nbsp-&nbsp " + row.feedtype + " &nbsp-&nbsp " + row.amount  + "</li>";
            }
 
        }
 
                      //function to get the list of feeds from the database
 
        function outputFeeds() {
            
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("SELECT * FROM feeds ORDER BY feeddate DESC, feedtime DESC LIMIT 4", [], updateFeedList);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }

 
        //function to add feed to the database
 
        function addFeed() {
            
            if (mydb) {
               
                var feedtime = document.getElementById("feedtime").value;
                var feeddate = document.getElementById("feeddate").value;
                var feedtype = document.getElementById("feedtype").value;
                
                if (feedtime !== "" && feeddate !== "" && feeddate !== "" ) {
                    mydb.transaction(function(t) {
                        t.executeSql("INSERT INTO feeds (feedtime, feeddate, feedtype) VALUES (?, ?, ?)", [feedtime, feeddate, feedtype]);
                        outputFeeds();
                    });
                } else {
                    alert("You must enter a time and date!");
                }
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }

        function addEndFeed() {
            
            if (mydb) {
               
                var endfeedtime = document.getElementById("endfeedtime").value;
                var amount = document.getElementById("amount").value;
                
                
                
                if (endfeedtime !== "" ) {
                    mydb.transaction(function(t) {
                        t.executeSql("UPDATE feeds SET endfeedtime=?, amount=? WHERE ID = (SELECT max(id) FROM feeds) ", [endfeedtime, amount]);
                        outputFeeds();
                    });
                } else {
                    alert("You must enter a time!");
                }
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }
 
 
        
 
        function deleteFeed(id) {
          
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("DELETE FROM feeds WHERE id=?", [id], outputFeeds);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }
 
        outputFeeds();

                                                                                            //Add Profile to database table profile


        function addProfile() {

            if (mydb) {
               
                var email = document.getElementById("email").value;
                var fname = document.getElementById("fname").value;
                var lname = document.getElementById("lname").value;
                var child = document.getElementById("child").value;
                var pword = document.getElementById("pword").value;
                var uname = document.getElementById("uname").value;
                
                if (email !== "" && fname !== "" && lname !== "" && uname !== "" && pword !== "" ) {
                    mydb.transaction(function(t) {
                        t.executeSql("INSERT INTO profile (email, fname, lname, child, uname, pword) VALUES (?, ?, ?, ?, ?, ?)", [email, fname, lname, child, uname, pword]);
                        outputProfile();
                    });
                } else {
                    alert("You must complete all fields");
                }
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }

        function outputProfile() {
           
            if (mydb) {
                
                mydb.transaction(function(t) {
                    t.executeSql("SELECT * FROM profile", []);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }


                                                                                         //Add Nappy Change to Database

function updateNappyList(transaction, results) {
            
            var listitems = "";
            
            var listholder = document.getElementById("nappylist");
 
            listholder.innerHTML = "";
 
            var i;
            for (i = 0; i < results.rows.length; i++) {
                var row = results.rows.item(i);
 
                listholder.innerHTML += "<li>" + row.ntime + " - " + row.ndate + " - " + row.ntype + " &nbsp-&nbsp " + row.observations + "</li>";
            }
 
        }
 
                      //function to get the list of nappy changes from the database
 
        function outputNappy() {
            
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("SELECT * FROM nappy ORDER BY ndate DESC, ntime DESC LIMIT 4", [], updateNappyList);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }

 
        //function to add nappy change to the database
 
        function addNappy() {
            
            if (mydb) {
               
                var ntime = document.getElementById("ntime").value;
                var ndate = document.getElementById("ndate").value;
                var ntype = document.getElementById("ntype").value;
                var observations = document.getElementById("observations").value;
                
                if (ntime !== "" && ndate !== "" && ndate !== "" && observations !== "") {
                    mydb.transaction(function(t) {
                        t.executeSql("INSERT INTO nappy (ntime, ndate, ntype, observations) VALUES (?, ?, ?, ?)", [ntime, ndate, ntype, observations]);
                        outputNappy();
                    });
                } else {
                    alert("You must enter a time and date!");
                }
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }
 
 
        
 
        function deleteNappy(id) {
          
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("DELETE FROM nappy WHERE id=?", [id], outputNappy);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }
 
        outputNappy();



                                                                                                //Add Meds to Database

function updateMedsList(transaction, results) {
            
            var listitems = "";
            
            var listholder = document.getElementById("medlist");
 
            listholder.innerHTML = "";
 
            var i;
            for (i = 0; i < results.rows.length; i++) {
                var row = results.rows.item(i);
 
                listholder.innerHTML += "<li>" + row.medtype + " - " + row.medtime + " - " + row.meddate + "</li>";
            }
 
        }
 
                      //function to get the list of meds from the database
 
        function outputMeds() {
            
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("SELECT * FROM medication ORDER BY meddate DESC, medtime DESC LIMIT 4", [], updateMedsList);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }

 
        //function to add medications to the database
 
        function addMed() {
            
            if (mydb) {
               
                var medtime = document.getElementById("medtime").value;
                var meddate = document.getElementById("meddate").value;
                var medtype = document.getElementById("medtype").value;
                
                if (medtime !== "" && meddate !== "" && meddate !== "" ) {
                    mydb.transaction(function(t) {
                        t.executeSql("INSERT INTO medication (medtime, meddate, medtype) VALUES (?, ?, ?)", [medtime, meddate, medtype]);
                        outputMeds();
                    });
                } else {
                    alert("You must enter a time and date!");
                }
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }
 
 
        
 
        function deleteMed(id) {
          
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("DELETE FROM medication WHERE id=?", [id], outputMed);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }
 
        outputMeds();


                                                                                    //Add Milestones to Database

function updateMilestoneList(transaction, results) {
            
            var listitems = "";
            
            var listholder = document.getElementById("milestonelist");
 
            listholder.innerHTML = "";
 
            var i;
            for (i = 0; i < results.rows.length; i++) {
                var row = results.rows.item(i);
 
                listholder.innerHTML += "<li>" + row.mstype + " - " + row.msdate  + "</li>";
            }
 
        }
 
                      //function to get the list of milestones from the database
 
        function outputMilestone() {
            
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("SELECT * FROM milestones ORDER BY msdate DESC LIMIT 6", [], updateMilestoneList);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }

 
        //function to add milestone to the database
 
        function addMilestone() {
            
            if (mydb) {
               
                var mstype = document.getElementById("mstype").value;
                var msdate = document.getElementById("msdate").value;
                
                
                if (mstype !== "" && msdate !== "" ) {
                    mydb.transaction(function(t) {
                        t.executeSql("INSERT INTO milestones (mstype, msdate) VALUES (?, ?)", [mstype, msdate]);
                        outputMilestone();
                    });
                } else {
                    alert("You must enter a time and date!");
                }
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }
 
 
        
 
        function deleteMilestone(id) {
          
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("DELETE FROM milestones WHERE id=?", [id], outputMilestone);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }
 
        outputMilestone();
 
                                                                            //ADD SLEEP TIMES TO DATABASE

function updateSleepList(transaction, results) {
            
            var listitems = "";
            
            var listholder = document.getElementById("sleeplist");
 
            listholder.innerHTML = "";
 
            var i;
            for (i = 0; i < results.rows.length; i++) {
                var row = results.rows.item(i);
 
                listholder.innerHTML += "<li>" + row.stime + " - " + row.endstime  + " - " + row.sdate + "</li>";
            }
 
        }
 
                      //function to get the list of sleeps from the database
 
        function outputSleep() {
            
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("SELECT * FROM sleep ORDER BY sdate DESC, stime DESC LIMIT 6 ", [], updateSleepList);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }

 
        //function to add milestone to the database
 
        function addSleep() {
            
            if (mydb) {
               
                var stime = document.getElementById("stime").value;
                var sdate = document.getElementById("sdate").value;
                
                
                if (stime !== "" && sdate !== "" ) {
                    mydb.transaction(function(t) {
                        t.executeSql("INSERT INTO sleep (stime, sdate) VALUES (?, ?)", [stime, sdate]);
                        outputSleep();
                    });
                } else {
                    alert("You must enter a time and date!");
                }
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }

        function addEndSleep() {
            
            if (mydb) {
               
                var endstime = document.getElementById("endstime").value;
                var endsdate = document.getElementById("endsdate").value;
                
                
                if (endstime !== "" && endsdate !== "" ) {
                    mydb.transaction(function(t) {
                        t.executeSql("UPDATE sleep SET endstime=?, endsdate=? WHERE ID = (SELECT max(id) FROM sleep) ", [endstime, endsdate]);
                        outputSleep();
                    });
                } else {
                    alert("You must enter a time and date!");
                }
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }
 
 
        
 
        function deleteSleep(id) {
          
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("DELETE FROM sleep WHERE id=?", [id], outputSleep);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }
 
        outputSleep();


                                                                                                            //CALCULATE FEED AMOUNTS


function outputRecentFeeds() {
            
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("SELECT SUM(amount) AS total FROM feeds WHERE feeddate  > datetime('now', '-1 day') ", [], updateRecentFeedList);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }

function updateRecentFeedList(transaction, results) {
            
            var listitems = "";
            
            var listholder = document.getElementById("feedamountlist");
 
            listholder.innerHTML = "";
 
            var i;
            for (i = 0; i < results.rows.length; i++) {
                var row = results.rows.item(i);
 
                listholder.innerHTML += "<li>" + "Your baby has had" + "&nbsp" + row.total + "&nbsp" + "ounces within the last 24 hours." ;
            }
 
        }



                                                                                                        //CALCULATE SLEEP TOTAL TIME


function outputRecentSleep() {
            
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("SELECT (endstime - stime) AS STOTAL FROM sleep WHERE ID = (SELECT max(id) FROM sleep)", [], updateRecentSleepList);
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }

function updateRecentSleepList(transaction, results) {
            
            var listitems = "";
            
            var listholder = document.getElementById("sleepamountlist");
 
            listholder.innerHTML = "";
 
            var i;
            for (i = 0; i < results.rows.length; i++) {
                var row = results.rows.item(i);
 
                listholder.innerHTML += "<li>" + "Your baby's last sleep was for "  + row.STOTAL + "&nbsp" + "hours in total." ;
            }
 
        }


                                                                                                            //CALCULATE RECENT NAPPY CHANGES

function outputNappyAmount() {
            
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("SELECT COUNT(*) AS nTOTAL FROM nappy WHERE ndate  > datetime('now', '-1 day') ", [], updateNappyAmount);
                    
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }
        


 function outputDirtyAmount() {
            
            if (mydb) {
                mydb.transaction(function(t) {
                    t.executeSql("SELECT COUNT(*) AS dTOTAL FROM nappy WHERE ntype = ('Dirty')  AND ndate  > datetime('now', '-1 day') ", [], updateNappyAmount);
                    
                });
            } else {
                alert("db not found, your browser does not support web sql!");
            }
        }
        






function updateNappyAmount(transaction, results) {
            
            var listitems = "";
            
            var listholder = document.getElementById("nappyamountlist");
 
            listholder.innerHTML = "";
 
            var i;
            for (i = 0; i < results.rows.length; i++) {
                var row = results.rows.item(i);
 
                listholder.innerHTML += "<li>" + "Your baby has had "  + row.nTOTAL + "&nbsp" + "nappy changes in the last 24 hours.";
            }
 
        }

       

        
        


                      
 
       
   

            

</script>

</body>
</html>

<script type="text/javascript">
var date = new Date();

var day = date.getDate();
var month = date.getMonth() + 1;
var year = date.getFullYear();

if (month < 10) month = "0" + month;
if (day < 10) day = "0" + day;

var today = year + "-" + month + "-" + day;


$("#meddate, #msdate, #ndate, #feeddate, #sdate, #endsdate ").attr("value", today);
</script>



